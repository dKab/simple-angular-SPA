<header-block>
  <h2 class="inline view-heading">Курсы</h2>
  <h2 class="inline"> &rarr; {{ course.header }}</h2>
  <div class="pull-right shift-top-30">
    <login-block></login-block>
  </div>
</header-block>
<div class="container add-course-container">
  <form name="courseForm" ng-submit="course.submitIfValid(courseForm)" class="form-horizontal" novalidate>
    <div ng-class="{ 'has-error': courseForm.title.$invalid && (courseForm.title.$touched || courseForm.$submitted), 'form-group': true }">
      <label for="course_name" class="col-sm-2">Название</label>
      <div class="col-sm-5"><input type="text" id="course_name" required name="title" ng-model="course.title" placeholder="Название" class="form-control"></div>
      <div class="text-danger col-sm-3" ng-show="courseForm.title.$error.required && (courseForm.title.$touched || courseForm.submitted)">*Это поле обязательно</div>
    </div>
    <div ng-class="{ 'has-error': courseForm.description.$invalid && (courseForm.description.$touched || courseForm.$submitted), 'form-group': true }">
      <label for="description" class="col-sm-2">Описание</label>
      <div class="col-sm-8">
        <textarea type="text" name="description" required  id="description" ng-model="course.description" class="form-control" placeholder="Описание"></textarea>
      </div>
      <div ng-show="courseForm.description.$error.required && (courseForm.description.$touched || courseForm.$submitted)" class="text-danger col-sm-8 col-sm-push-2">*Это поле обязательно</div>
    </div>
    <div ng-class="{ 'has-error': courseForm.date.$invalid && (courseForm.date.$touched || courseForm.$submitted), 'form-group': true }">
      <label for="date" class="col-sm-2">Дата</label>
      <div class="col-sm-3">
        <input type="date" class="form-control"
               id="date"
               name="date"
               required
               placeholder="дд.мм.гггг"
               ng-model="course.date"
               />
      </div>
      <div class="text-danger col-sm-3" ng-show="courseForm.date.$error.required && (courseForm.date.$touched || courseForm.$submitted)">*Это поле обязательно</div>
      <div class="text-danger col-sm-3" ng-show="courseForm.date.$error.date && (courseForm.date.$touched || courseForm.$submitted)">Неверный формат даты</div>
    </div>
    <div ng-class="{ 'has-error': courseForm.duration.$invalid && (courseForm.duration.$touched || courseForm.$submitted), 'form-group': true }">
      <label for="duration" class="col-sm-2">Продолжительность</label>
      <div class="col-sm-2"><input type="number" name="duration" id="duration" required min="0"  ng-model="course.duration" placeholder="минуты" class="form-control"></div>
      <div class="col-sm-8"><span>3 часа 40 минут</span>
        <span class="text-danger" ng-show="courseForm.duration.$error.required && (courseForm.duration.$touched || courseForm.$submitted)">*Это поле обязательно</span>
        <span class="text-danger" ng-show="courseForm.duration.$error.number && (courseForm.duration.$touched || courseForm.$submitted)">Введите количество минут числом</span>
      </div>
    </div>
    <div class="form-group">
      <label class="col-sm-2">Авторы</label>
      <div class="col-sm-10">
        <list-input ng-model="course.authors"
                    source="course.availableAuthors"
                    choose-callback="course.srNotifyAuthorSelected(author)"
                    remove-callback="course.srNotifyAuthorRemoved(author)" >
        </list-input>
      </div>
      <div class="col-sm-12">{{ course.authors.join(', ') }}</div>
    </div>
    <div class="row">
      <div class="text-danger col-sm-push-2 col-sm-10" ng-show="!course.authors.length && courseForm.$submitted">*Укажите хотя бы одного автора</div>
    </div>
    <div class="form-group buttons">
      <div class="col-sm-push-2 col-sm-10">
        <button type="submit" class="btn btn-success">Сохранить</button>
        <a class="btn btn-danger" href="#/courses">Отмена</a>
      </div>
    </div>
  </form>
</div>
